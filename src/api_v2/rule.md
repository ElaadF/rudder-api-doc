
This file describe REST API v2 for Rules.

Corresponding code is available here: 
https://github.com/Normation/rudder/blob/master/rudder-web/src/main/scala/com/normation/rudder/web/rest/rule/RuleAPI2.scala



/**
   @apiDefineStructure ruleId

   @apiParamTitle (URL parameters) URL parameters

   @apiParam (URL parameters) {UUID} id ID of he Rule
 */

 /**
   @apiDefineStructure ruleCreation

   @apiParamTitle (Mono) Mono valued parameters - Those parameters will only work with one value

   @apiParam (Mono) {String}  displayName        Name of the Rule.
   @apiParam (Mono) {UUID}    [id=autoGenerated] Define the id of the Rule to create, Rudder will generate an id if this is missing. You should only use it for specific use case.
   @apiParam (Mono) {String}  [shortDescription] Short description of the Rule.
   @apiParam (Mono) {String}  [longDescription]  Long description of the Rule.
   @apiParam (Mono) {Boolean} [enabled=true]     enabled the Rule at creation. But this parameter can be overriden : if you want to create Rule with directives and Rule targets directly with workflow enabled, the Rule will be created disabled (to prevent creating active Rule without validation).

   @apiParamTitle (Multi) Multi valued parameters - Those parameters need to be entered several times, they will add each other to form a list.

   @apiParam (Multi) {UUID}        [directives] link one directive to the Rule. value needs to be an existing directive ID.
   @apiParam (Multi) {Rule target} [targets]    Link one target to the Rule. Rule targets are "group:groupId" and the special targets : "special:all" and "special:all_exceptPolicyServers".
 */


[GET] api/rules
-----------------

    /**
    @api {get} /api/rules 1. List all Rules
    @apiVersion 2.0.0
    @apiName listRules
    @apiGroup Rules
    @apiDescription Get all Rules available in Rudder
    
    @apiExample Example usage:
    curl -H "X-API-Token: yourToken" -X GET http://rudder.example.com/rudder/api/2/rules?prettify=true
    @apiSuccessExample Success-Response:
      HTTP/1.1 200 OK
      {
        "action":"listRules",
        "result":"success",
        "data":{
          "rules":[{
            "id":"bb803bc8-2df7-4734-a6b6-454476c82bc6",
            "displayName":"to",
            "shortDescription":"",
            "longDescription":"",
            "directives":[],
            "targets":[],
            "enabled":false,
            "system":false
          },{
            "id":"628abf7b-8b5c-4c44-8cca-437b636a9523",
            "displayName":"My roule",
            "shortDescription":"",
            "longDescription":"",
            "directives":["e61c0696-172b-46bb-80a9-d6f5ef1d2f85"],
            "targets":["special:all_exceptPolicyServers"],
            "enabled":true,
            "system":false
          },{
            "id":"06ba8940-ed6c-4102-ba46-93d640a64c36",
            "displayName":"My first Rule",
            "shortDescription":"",
            "longDescription":"",
            "directives":["cba93d24-8780-4308-b732-84995125562a","7d44f9ad-9a54-4165-bb46-f66e6c674b39","6847ad49-1c7e-4314-b764-ec176b882b6b","19be05b2-fb68-4ae1-acc0-e0ad2eba71fd","0be6fb7c-42c5-419e-9f6f-eb13ac4e4acd"],
            "targets":["group:3b9be575-590d-4fe4-9fa5-cc166d985ccf"],
            "enabled":false,
            "system":false
          }]
        }
      }


     */


[PUT] api/rules
-----------------

    /**
    @api {put} /api/rules 3. Create a new Rule
    @apiVersion 2.0.0
    @apiName createRule
    @apiGroup Rules
    @apiDescription Create a new Rule in Rudder. You can define all of its parameters, but you need at least its name
    
    @apiStructure ruleCreation
 

    @apiExample Example usage:
    curl -H "X-API-Token: yourToken -X PUT http://rudder.example.com/rudder/api/2/rules -d "displayName=Name of New Rule"

     */


[PUT] api/rules
-----------------

    /**
    @api {put} /api/rules 6. Clone a Rule
    @apiVersion 2.0.0
    @apiName cloneRule
    @apiGroup Rules
    @apiDescription Create a new Rule based on an existing Rule. you can still modify its parameters, but you need at least to specify the name of the new Rule 

    @apiParam (Mono) {UUID} source ID of the Rule the clone will be based onto. if this parameter is missing there will be only a Rule creation.
    @apiStructure ruleCreation
    
    @apiExample Example usage:
    curl -H "X-API-Token: yourToken" -X PUT http://rudder.example.com/rudder/api/2/rules?prettify=true  -d "source=RuleIDSource" -d "displayName=Name of New Rule‚Äù

    @apiSuccessExample Success-Response:
      HTTP/1.1 200 OK
      {
        "action":"createRule",
        "id":"73fb7802-5326-483a-a6d6-c29e78449558",
        "result":"success",
        "data":{
          "rules":[{
            "id":"73fb7802-5326-483a-a6d6-c29e78449558",
            "displayName":"Cloned Rule",
            "shortDescription":"",
            "longDescription":"",
            "directives":["c4f58823-5cd6-455b-b0bc-1511c51e2533"],
            "targets":["group:1e975cb2-b929-46f5-9b1c-5e4d5d5f1027"],
            "enabled":false,
            "system":false
          }]
        }
      }

    @apiErrorExample Error-Response:
      HTTP/1.1 500 Server Error
      {
        "action":"createRule",
        "id":"4f7fb9e5-e9e2-41be-99fc-bfd95a733360",
        "result":"error",
      }

     */

[GET] api/rules/id
--------------------------

    /**
    @api {get} /api/rules/id 2. Get a Rule details
    @apiVersion 2.0.0
    @apiName ruleDetails
    @apiGroup Rules
    @apiDescription Get the details of one Rule, whose ID is specified in the URL
    
    @apiStructure ruleId

    @apiExample Example usage:
    curl -H "X-API-Token: yourToken" -X GET http://rudder.example.com/rudder/api/2/rules/06ba8940-ed6c-4102-ba46-93d640a64c36?prettify=true
    @apiSuccessExample Success-Response:
      HTTP/1.1 200 OK
      {
        "action":"ruleDetails",
        "id":"06ba8940-ed6c-4102-ba46-93d640a64c36",
        "result":"success",
        "data":{
          "rules":[{
            "id":"06ba8940-ed6c-4102-ba46-93d640a64c36",
            "displayName":"My first Rule",
            "shortDescription":"",
            "longDescription":"",
            "directives":["cba93d24-8780-4308-b732-84995125562a","7d44f9ad-9a54-4165-bb46-f66e6c674b39","6847ad49-1c7e-4314-b764-ec176b882b6b","19be05b2-fb68-4ae1-acc0-e0ad2eba71fd","0be6fb7c-42c5-419e-9f6f-eb13ac4e4acd"],
            "targets":["group:3b9be575-590d-4fe4-9fa5-cc166d985ccf"], 
            "enabled":false,
            "system":false
          }]
        }
      }


    */

[DELETE] api/rules/id
--------------------------

    /**
    @api {delete} /api/rules/{id} 5. Delete a Rule
    @apiVersion 2.0.0
    @apiName deleteRule
    @apiGroup Rules
    @apiDescription Delete the Rule having the ID passed in the URL
    
    @apiStructure ruleId

    @apiExample Example usage:
    curl -H "X-API-Token: yourToken" -X DELETE http://rudder.example.com/rudder/api/2/rules/176ad06b-ed02-4da3-8053-16225d217741?prettify=true
    @apiSuccessExample Success-Response:
      HTTP/1.1 200 OK
      {
        "action":"deleteRule",
        "id":"176ad06b-ed02-4da3-8053-16225d217741",
        "result":"success",
        "data":{
          "rules":[{
            "changeRequestId":"47",
            "id":"176ad06b-ed02-4da3-8053-16225d217741",
            "displayName":"toto2",
            "shortDescription":"",
            "longDescription":"",
            "directives":[],
            "targets":[],
            "enabled":false,
            "system":false
          }]
        }
      }

    @apiErrorExample Error-Response:
      HTTP/1.1 500
      {
        "action":"deleteRule",
        "id":"176ad06b-ed02-4da3-8053-16225d217741",
        "result":"error",
        "error details":"Could not delete Rule 176ad06b-ed02-4da3-8053-16225d217741 cause is: Could not find Rule 176ad06b-ed02-4da3-8053-16225d217741."
      }

    */


[POST] api/rules/id
--------------------------

    /**
    @api {post} /api/rules/id 4. Update a Rule
    @apiVersion 2.0.0
    @apiName updateRule
    @apiGroup Rules
    @apiDescription Modify any parameters of a Rule. Missing parameters means to not modify that parameter
    
    @apiStructure ruleId

    @apiParamTitle (Mono) Mono valued parameters - Those parameters will only work with one value

    @apiParam (Mono) {String}  [displayName]      Name of the Rule.
    @apiParam (Mono) {Boolean} [enabled]          Enable/disable the Rule.
    @apiParam (Mono) {String}  [shortDescription] Short description of the Rule.
    @apiParam (Mono) {String}  [longDescription]  Long description of the Rule.

    @apiParamTitle (Multi) Multi valued parameters - Those parameters need to be entered several times, they will add each other to form a list.

    @apiParam (Multi) {UUID}        [directives] Link one directive to the Rule. value needs to be an existing directive ID.
    @apiParam (Multi) {Rule target} [targets]    Link one target to the Rule. Rule targets are for groups : "group:groupId", nodes : "node:nodeId" and the special targets : "special:all" and "special:all_exceptPolicyServers".
    @apiExample Example usage:
    Update display name: 
    curl -H "X-API-Token: yourToken" -X POST http://rudder.example.com/rudder/api/2/rules/RuleID -d "displayName=Name of Rule"


    */
